#
# Generated by Ansible
#
# Ändringar i denna fil ska göras via Ansible, annars skrivs de över. / Lasse
#

# TODO: https://mariadb.com/kb/en/library/rotating-logs-on-unix-and-linux/

/var/log/mariadb/*log {
        create 660 mysql mysql
        daily
        rotate 30
        missingok
        notifempty
        sharedscripts 
        compress
        # minsize: only use with logrotate >= 3.7.4
        # minsize 1M
        # maxsize: only use with logrotate >= 3.8.1
        # maxsize 100M 
        # dateext # only use if your logrotate version is compatible with below dateformat
        # dateformat .%Y-%m-%d-%H-%M-%S # only use with logrotate >= 3.9.2
        # olddir archive/
        # createolddir 770 mysql mysql # only use with logrotate >= 3.8.9
    postrotate
        # just if mysqld is really running
        if test -x /usr/bin/mysqladmin && \
           /usr/bin/mysqladmin ping &>/dev/null
        then
           /usr/bin/mysqladmin --local flush-error-log \
              flush-engine-log flush-general-log flush-slow-log
        fi
    endscript
}
